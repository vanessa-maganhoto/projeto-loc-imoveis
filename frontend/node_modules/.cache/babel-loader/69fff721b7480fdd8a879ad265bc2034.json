{"ast":null,"code":"var _jsxFileName = \"/home/vanessa/projetos/loccasas/frontend/src/componentes/formAtualizaCadastro.tsx\";\nimport React from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport './form.css';\nimport axios from 'axios';\nimport { BASE_URL } from '../utils/requests';\nimport { useParams } from 'react-router-dom';\nexport default function FormAtualizaCadastro() {\n  const params = useParams();\n  const id = params.imovelId;\n  const navigate = useNavigate();\n  const [imovel, setImovel] = React.useState();\n  React.useEffect(() => {\n    axios.get(`${BASE_URL}/imovel/${id}`).then(response => {\n      setImovel(response.data);\n    });\n  }, [id]);\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    const titulo = event.target.titulo.value;\n    const imagem = event.target.imagem.value;\n    const cep = event.target.cep.value;\n    const logradouro = event.target.logradouro.value;\n    const numero = event.target.numero.value;\n    const bairro = event.target.bairro.value;\n    const complemento = event.target.complemento.value;\n    const cidade = event.target.cidade.value;\n    const estado = event.target.estado.value;\n    const categoria = event.target.categoria.value;\n    const descricao = event.target.descricao.value;\n    const config = {\n      baseURL: BASE_URL,\n      method: 'PUT',\n      url: '/imovel',\n      data: {\n        title: titulo,\n        image: imagem,\n        categoria: categoria,\n        descricao: descricao,\n        endereco: {\n          cep: cep,\n          logradouro: logradouro,\n          numero: numero,\n          bairro: bairro,\n          complemento: complemento,\n          cidade: cidade,\n          estado: estado\n        }\n      }\n    };\n    axios(config).then(() => {\n      window.alert(\"Alterações realizadas com sucesso\");\n      navigate(\"/\");\n    }).catch(() => {\n      window.alert(\"Ocorreu um erro ao atualizar os dados\");\n    });\n  };\n\n  const getElem = id => document.getElementById(id);\n\n  const checkCEP = e => {\n    const cep = e.target.value.replace(/\\D/g, '');\n    console.log(cep);\n    fetch(`https://viacep.com.br/ws/${cep}/json/`).then(res => res.json()).then(data => {\n      getElem('logradouro').value = data.logradouro;\n      getElem('bairro').value = data.bairro;\n      getElem('complemento').value = data.complemento;\n      getElem('cidade').value = data.localidade;\n      getElem('estado').value = data.uf;\n      console.log(data);\n    }).catch(e => {\n      console.error(\"Nao foi possivel buscar o cep\", e);\n      return true;\n    });\n  };\n\n  if (!imovel) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loc-form-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loc-card-bottom-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    style: {\n      fontSize: \"30px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  }, \"Cadastro de Im\\xF3vel\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"loc-form\",\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group loc-form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"titulo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 25\n    }\n  }, \"T\\xEDtulo\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    type: \"text\",\n    id: \"titulo\",\n    defau: imovel === null || imovel === void 0 ? void 0 : imovel.title,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loc-form-btn-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \" btn loc-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 25\n    }\n  }, \"Salvar\"))), /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    style: {\n      textDecoration: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn  loc-btn mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 21\n    }\n  }, \"Cancelar\"))));\n}","map":{"version":3,"sources":["/home/vanessa/projetos/loccasas/frontend/src/componentes/formAtualizaCadastro.tsx"],"names":["React","Link","useNavigate","axios","BASE_URL","useParams","FormAtualizaCadastro","params","id","imovelId","navigate","imovel","setImovel","useState","useEffect","get","then","response","data","handleSubmit","event","preventDefault","titulo","target","value","imagem","cep","logradouro","numero","bairro","complemento","cidade","estado","categoria","descricao","config","baseURL","method","url","title","image","endereco","window","alert","catch","getElem","document","getElementById","checkCEP","e","replace","console","log","fetch","res","json","localidade","uf","error","fontSize","textDecoration"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { Link, useNavigate } from 'react-router-dom';\nimport './form.css'\nimport axios, { AxiosRequestConfig } from 'axios';\nimport { BASE_URL } from '../utils/requests';\nimport { useParams } from 'react-router-dom';\nimport { Imovel } from '../types/imovel';\n\n\n\nexport default function FormAtualizaCadastro() {\n\n    const params = useParams()\n    const id = params.imovelId\n\n    const navigate = useNavigate();\n\n    const [imovel, setImovel] = React.useState<Imovel>()\n\n    React.useEffect(() => {\n        axios.get(`${BASE_URL}/imovel/${id}`)\n            .then(response => {\n                setImovel(response.data)\n            })\n    }, [id])\n\n    \n\n    const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n        event.preventDefault()\n\n        const titulo = (event.target as any).titulo.value\n        const imagem = (event.target as any).imagem.value\n        const cep = (event.target as any).cep.value\n        const logradouro = (event.target as any).logradouro.value\n        const numero = (event.target as any).numero.value\n        const bairro = (event.target as any).bairro.value\n        const complemento = (event.target as any).complemento.value\n        const cidade = (event.target as any).cidade.value\n        const estado = (event.target as any).estado.value\n        const categoria = (event.target as any).categoria.value\n        const descricao = (event.target as any).descricao.value\n\n        const config: AxiosRequestConfig = {\n            baseURL: BASE_URL,\n            method: 'PUT',\n            url: '/imovel',\n            data: {\n                title: titulo,\n                image: imagem,\n                categoria: categoria,\n                descricao: descricao,\n\n                endereco: {\n                    cep: cep,\n                    logradouro: logradouro,\n                    numero: numero,\n                    bairro: bairro,\n                    complemento: complemento,\n                    cidade: cidade,\n                    estado: estado\n                }\n            }\n        }\n\n        axios(config)\n            .then(() => {\n                window.alert(\"Alterações realizadas com sucesso\")\n                navigate(\"/\")\n\n\n            })\n            .catch(() => {\n                window.alert(\"Ocorreu um erro ao atualizar os dados\")\n            })\n    }\n\n\n\n    const getElem = (id: string) => document.getElementById(id) as any\n\n    const checkCEP = (e: React.FormEvent<HTMLInputElement>) => {\n        const cep = (e.target as any).value.replace(/\\D/g, '')\n        console.log(cep)\n        fetch(`https://viacep.com.br/ws/${cep}/json/`)\n            .then(res => res.json())\n            .then(data => {\n\n                getElem('logradouro').value = data.logradouro\n                getElem('bairro').value = data.bairro\n                getElem('complemento').value = data.complemento\n                getElem('cidade').value = data.localidade\n                getElem('estado').value = data.uf\n                console.log(data)\n\n            })\n            .catch(e => {\n                console.error(\"Nao foi possivel buscar o cep\", e )\n                return true;\n            })\n    }\n\n    if (!imovel){\n        return null\n    }\n\n    return (\n        <div className=\"loc-form-container\">\n            <div className=\"loc-card-bottom-container\">\n                <h3 style={{ fontSize: \"30px\" }}>Cadastro de Imóvel</h3>\n                <form className=\"loc-form\" onSubmit={handleSubmit}>\n                    <div className=\"form-group loc-form-group\">\n                        <label htmlFor=\"titulo\" >Título</label>\n                        <input className=\"form-control\" type=\"text\" id=\"titulo\" defau={imovel?.title} required/>\n                        {/* <label htmlFor='cep'>CEP</label>\n                        <input type=\"text\" id=\"cep\" className=\"form-control\" onBlur={checkCEP} value={imovel?.endereco.cep} required/>\n                        <label htmlFor='logradouro'>Logradouro</label>\n                        <input className=\"form-control\" type=\"text\" id='logradouro' value={imovel?.endereco.logradouro} required />\n                        <label htmlFor='numero'>Número</label>\n                        <input className=\"form-control\" type=\"text\" id=\"numero\" value={imovel?.endereco.numero} required/>\n                        <label htmlFor=\"bairro\">Bairro</label>\n                        <input className=\"form-control\" type=\"text\" id=\"bairro\" value={imovel?.endereco.bairro} required/>\n                        <label htmlFor='complemento'>Complemento</label>\n                        <input className=\"form-control\" type=\"text\" id=\"complemento\" value={imovel?.endereco.complemento} />\n                        <label htmlFor='cidade'>Cidade</label>\n                        <input className=\"form-control\" type=\"text\" id=\"cidade\" value={imovel?.endereco.cidade} required/>\n                        <label>Estado</label>\n                        <select className=\"form-control \" id=\"estado\"  required>\n                            <option value=\"\" disabled>Selecione o estado</option>\n                            <option value=\"AC\">AC</option>\n                            <option value=\"AL\">AL</option>\n                            <option value=\"AP\">AP</option>\n                            <option value=\"AM\">AM</option>\n                            <option value=\"BA\">BA</option>\n                            <option value=\"CE\">CE</option>\n                            <option value=\"DF\">DF</option>\n                            <option value=\"ES\">ES</option>\n                            <option value=\"GO\">GO</option>\n                            <option value=\"MA\">MA</option>\n                            <option value=\"MT\">MT</option>\n                            <option value=\"MS\">MS</option>\n                            <option value=\"MG\">MG</option>\n                            <option value=\"PA\">PA</option>\n                            <option value=\"PB\">PB</option>\n                            <option value=\"PE\">PE</option>\n                            <option value=\"PI\">PI</option>\n                            <option value=\"PR\">PR</option>\n                            <option value=\"RJ\">RJ</option>\n                            <option value=\"RN\">RN</option>\n                            <option value=\"RS\">RS</option>\n                            <option value=\"RO\">RO</option>\n                            <option value=\"RR\">RR</option>\n                            <option value=\"SC\">SC</option>\n                            <option value=\"SE\">SE</option>\n                            <option value=\"SP\">SP</option>\n                            <option value=\"TO\">TO</option>\n                        </select>\n                        <label htmlFor='categoria'>Categoria</label>\n                        <select className=\"form-control \"  id='categoria'  required>\n                            <option value=\"\" disabled selected>Escolha a categoria</option>\n                            <option value=\"comercial\">Comercial</option>\n                            <option value=\"residencial\">Residencial</option>\n                            <option value=\"temporada\">Temporada</option>\n                        </select>\n                        <label htmlFor='descricao'>Descrição do Imóvel</label>\n                        <textarea className=\"form-control\" id=\"descricao\" value={imovel?.descricao} required></textarea>\n                        <label htmlFor=\"imagem\">Imagem</label>\n                        <input className=\"form-control\" type=\"text\" id=\"imagem\" value={imovel?.image} required/>\n                        */}\n                    </div>\n                    <div className=\"loc-form-btn-container\">\n                        <button type=\"submit\" className=\" btn loc-btn\">Salvar</button>\n                    </div>\n                </form>\n                <Link to=\"/\" style={{ textDecoration: \"none\" }}  >\n                    <button className=\"btn  loc-btn mt-3\">Cancelar</button>\n                </Link>\n            </div>\n        </div>\n\n    )\n}"]},"metadata":{},"sourceType":"module"}